2025-12-05T12:18:23.0769917+05:30  [INF] Email background service started. (8e0d769c)
2025-12-05T12:18:23.3557983+05:30  [INF] Now listening on: "https://localhost:7283" (d826f4b8)
2025-12-05T12:18:23.3572234+05:30  [INF] Now listening on: "http://localhost:5117" (d826f4b8)
2025-12-05T12:18:23.4002424+05:30  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-12-05T12:18:23.4019497+05:30  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-12-05T12:18:23.4076368+05:30  [INF] Content root path: "D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi" (cc26f24e)
2025-12-05T12:18:23.9778037+05:30 0HNHJP94J4A6Q:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - null null (d509f86a)
2025-12-05T12:18:24.1142563+05:30 0HNHJP94J4A6Q:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 141.3058ms (74253ad3)
2025-12-05T12:18:24.1185778+05:30 0HNHJP94J4A6Q:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - null null (d509f86a)
2025-12-05T12:18:24.1185777+05:30 0HNHJP94J4A6Q:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-12-05T12:18:24.1204308+05:30 0HNHJP94J4A6Q:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - 200 null "application/javascript;charset=utf-8" 1.9003ms (74253ad3)
2025-12-05T12:18:24.1284986+05:30 0HNHJP94J4A6Q:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - 200 16533 "application/javascript; charset=utf-8" 10.036ms (74253ad3)
2025-12-05T12:18:24.1345585+05:30 0HNHJP94J4A6Q:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - null null (d509f86a)
2025-12-05T12:18:24.1610963+05:30 0HNHJP94J4A6Q:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 26.7946ms (74253ad3)
2025-12-05T12:18:24.2017508+05:30 0HNHJP94J4A6Q:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-12-05T12:18:24.2237697+05:30 0HNHJP94J4A6Q:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 22.0743ms (74253ad3)
2025-12-05T12:19:35.8680546+05:30 0HNHJP94J4A6Q:0000000B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 317 (d509f86a)
2025-12-05T12:19:35.8867065+05:30 0HNHJP94J4A6Q:0000000B [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:19:35.8886878+05:30 0HNHJP94J4A6Q:0000000B [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:19:36.2016927+05:30 0HNHJP94J4A6Q:0000000B [INF] Received HTTP response headers after 305.4931ms - 429 (f0742c1f)
2025-12-05T12:19:36.2036701+05:30 0HNHJP94J4A6Q:0000000B [INF] End processing HTTP request after 323.7405ms - 429 (7656b38e)
2025-12-05T12:19:36.2217486+05:30 0HNHJP94J4A6Q:0000000B [INF] CORS policy execution failed. (09b6f179)
2025-12-05T12:19:36.2219771+05:30 0HNHJP94J4A6Q:0000000B [INF] Request origin "https://localhost:7283" does not have permission to access the resource. (a03d560b)
2025-12-05T12:19:36.2244562+05:30 0HNHJP94J4A6Q:0000000B [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:19:36.2407551+05:30 0HNHJP94J4A6Q:0000000B [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:19:36.6858815+05:30 0HNHJP94J4A6Q:0000000B [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-12-05T12:19:36.6984300+05:30 0HNHJP94J4A6Q:0000000B [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 455.2297ms (afa2e885)
2025-12-05T12:19:36.6985050+05:30 0HNHJP94J4A6Q:0000000B [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:19:36.7061395+05:30 0HNHJP94J4A6Q:0000000B [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"John\",\"lastName\":\"Doe\",\"email\":\"john@example.com\",\"phone\":\"9876543210\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":1,\"state\":\"Madhya Pradesh\",\"city\":\"Indore\",\"subject\":\"Testing email system\",\"message\":\"This is a test message from Swagger.\",\"ipAddress\":\"127.0.0.1\"},\"statusCode\":400,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":493}" (663ceef5)
2025-12-05T12:19:36.7081988+05:30 0HNHJP94J4A6Q:0000000B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 400 null "application/problem+json; charset=utf-8" 840.2393ms (74253ad3)
2025-12-05T12:19:58.3797336+05:30 0HNHJP94J4A6Q:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T12:19:58.3858808+05:30 0HNHJP94J4A6Q:0000000D [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:19:58.3870541+05:30 0HNHJP94J4A6Q:0000000D [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:19:58.6608531+05:30 0HNHJP94J4A6Q:0000000D [INF] Received HTTP response headers after 272.3546ms - 429 (f0742c1f)
2025-12-05T12:19:58.6620003+05:30 0HNHJP94J4A6Q:0000000D [INF] End processing HTTP request after 276.2662ms - 429 (7656b38e)
2025-12-05T12:19:58.6624506+05:30 0HNHJP94J4A6Q:0000000D [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.GetAll (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:19:58.6650500+05:30 0HNHJP94J4A6Q:0000000D [INF] Route matched with "{action = \"GetAll\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]]] GetAll()" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:20:14.8273442+05:30 0HNHJP94J4A6Q:0000000D [INF] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AdditionalData], [c].[City], [c].[CountryId], [c].[CreatedAt], [c].[DeletedAt], [c].[Email], [c].[FirstName], [c].[IpAddress], [c].[LastName], [c].[Message], [c].[Phone], [c].[PhoneCountryCode], [c].[State], [c].[Subject], [c].[UpdatedAt], [c].[UserAgent]
FROM [ContactSubmissions] AS [c]
ORDER BY [c].[CreatedAt] DESC" (0723d8ff)
2025-12-05T12:20:14.8513039+05:30 0HNHJP94J4A6Q:0000000D [INF] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto, CleanArchitecture.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (605b4265)
2025-12-05T12:20:14.8587707+05:30 0HNHJP94J4A6Q:0000000D [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.GetAll (CleanArchitecture.WebApi)" in 16193.6755ms (afa2e885)
2025-12-05T12:20:14.8590289+05:30 0HNHJP94J4A6Q:0000000D [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.GetAll (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:20:14.8634410+05:30 0HNHJP94J4A6Q:0000000D [INF] HTTP Request Log: "{\"method\":\"GET\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":200,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":16199}" (663ceef5)
2025-12-05T12:20:14.8674241+05:30 0HNHJP94J4A6Q:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/api/ContactSubmissions""" - 200 null "application/json" 16487.7357ms (74253ad3)
2025-12-05T12:21:04.1809366+05:30 0HNHJP94J4A6Q:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 315 (d509f86a)
2025-12-05T12:21:04.1859318+05:30 0HNHJP94J4A6Q:0000000F [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:21:04.1869904+05:30 0HNHJP94J4A6Q:0000000F [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:21:04.4552923+05:30 0HNHJP94J4A6Q:0000000F [INF] Received HTTP response headers after 265.9024ms - 429 (f0742c1f)
2025-12-05T12:21:04.4568463+05:30 0HNHJP94J4A6Q:0000000F [INF] End processing HTTP request after 270.4405ms - 429 (7656b38e)
2025-12-05T12:21:04.4574089+05:30 0HNHJP94J4A6Q:0000000F [INF] CORS policy execution failed. (09b6f179)
2025-12-05T12:21:04.4574549+05:30 0HNHJP94J4A6Q:0000000F [INF] Request origin "https://localhost:7283" does not have permission to access the resource. (a03d560b)
2025-12-05T12:21:04.4575198+05:30 0HNHJP94J4A6Q:0000000F [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:21:04.4576475+05:30 0HNHJP94J4A6Q:0000000F [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:21:04.4614050+05:30 0HNHJP94J4A6Q:0000000F [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-12-05T12:21:04.4614793+05:30 0HNHJP94J4A6Q:0000000F [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 3.8135ms (afa2e885)
2025-12-05T12:21:04.4614899+05:30 0HNHJP94J4A6Q:0000000F [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:21:04.4631104+05:30 0HNHJP94J4A6Q:0000000F [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"John\",\"lastName\":\"Doe\",\"email\":\"john@example.com\",\"phone\":\"9876543210\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":1,\"state\":\"Madhya Pradesh\",\"city\":\"Indore\",\"subject\":\"Egg \u0026 Sperm Donation\",\"message\":\"This is a test contact submission.\",\"ipAddress\":\"127.0.0.1\"},\"statusCode\":400,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":4}" (663ceef5)
2025-12-05T12:21:04.4633555+05:30 0HNHJP94J4A6Q:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 400 null "application/problem+json; charset=utf-8" 282.9899ms (74253ad3)
2025-12-05T12:24:20.9428088+05:30 0HNHJP94J4A6R:00000001 [INF] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T12:24:20.9442043+05:30 0HNHJP94J4A6R:00000001 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:24:20.9453299+05:30 0HNHJP94J4A6R:00000001 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:24:21.2539543+05:30 0HNHJP94J4A6R:00000001 [INF] Received HTTP response headers after 303.1864ms - 429 (f0742c1f)
2025-12-05T12:24:21.2552500+05:30 0HNHJP94J4A6R:00000001 [INF] End processing HTTP request after 310.8913ms - 429 (7656b38e)
2025-12-05T12:24:21.2554179+05:30 0HNHJP94J4A6R:00000001 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:24:21.2571246+05:30 0HNHJP94J4A6R:00000001 [INF] HTTP Request Log: "{\"method\":\"OPTIONS\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":204,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":0}" (663ceef5)
2025-12-05T12:24:21.2572540+05:30 0HNHJP94J4A6R:00000001 [INF] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - 204 null null 314.5356ms (74253ad3)
2025-12-05T12:24:21.2583748+05:30 0HNHJP94J4A6R:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 244 (d509f86a)
2025-12-05T12:24:21.2595977+05:30 0HNHJP94J4A6R:00000003 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:24:21.2607033+05:30 0HNHJP94J4A6R:00000003 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:24:21.5309804+05:30 0HNHJP94J4A6R:00000003 [INF] Received HTTP response headers after 268.5642ms - 429 (f0742c1f)
2025-12-05T12:24:21.5322788+05:30 0HNHJP94J4A6R:00000003 [INF] End processing HTTP request after 272.5046ms - 429 (7656b38e)
2025-12-05T12:24:21.5325343+05:30 0HNHJP94J4A6R:00000003 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:24:21.5325995+05:30 0HNHJP94J4A6R:00000003 [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:24:21.5327192+05:30 0HNHJP94J4A6R:00000003 [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:24:48.8160318+05:30 0HNHJP94J4A6R:00000003 [INF] Executed DbCommand ("82"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ContactSubmissions] ([Id], [AdditionalData], [City], [CountryId], [CreatedAt], [DeletedAt], [Email], [FirstName], [IpAddress], [LastName], [Message], [Phone], [PhoneCountryCode], [State], [Subject], [UpdatedAt], [UserAgent])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);" (0723d8ff)
2025-12-05T12:24:51.1786572+05:30 0HNHJP94J4A6R:00000003 [INF] Executing "CreatedAtActionResult", writing value of type '"CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto"'. (605b4265)
2025-12-05T12:24:51.1894803+05:30 0HNHJP94J4A6R:00000003 [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 29656.7115ms (afa2e885)
2025-12-05T12:24:51.1895041+05:30 0HNHJP94J4A6R:00000003 [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:24:51.1916017+05:30 0HNHJP94J4A6R:00000003 [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"Today\",\"lastName\":\"Test\",\"email\":\"todayTest@gmail.com\",\"phone\":\"9089908989\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"UP\",\"city\":\"Noida\",\"subject\":\"Surrogacy w/ FET\",\"message\":\"Test Today from Noida\",\"captchaPassed\":true},\"statusCode\":201,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":29657}" (663ceef5)
2025-12-05T12:24:51.1918678+05:30 0HNHJP94J4A6R:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 201 null "application/json" 29933.6338ms (74253ad3)
2025-12-05T12:24:51.2590854+05:30  [ERR] Failed executing DbCommand ("4"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (627a98df)
2025-12-05T12:24:51.3033356+05:30  [ERR] An exception occurred in the database while saving changes for context type '"CleanArchitecture.Infrastructure.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Repositories.NotificationRepository.AddAsync(Notification entity) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Repositories\NotificationRepository.cs:line 21
2025-12-05T12:24:51.3894762+05:30  [ERR] Unhandled exception while processing queued email to "todayTest@gmail.com" (7f8c6189)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Repositories.NotificationRepository.AddAsync(Notification entity) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Repositories\NotificationRepository.cs:line 21
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 78
2025-12-05T12:24:51.3992760+05:30  [ERR] Failed executing DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime2), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12),
(@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);" (627a98df)
2025-12-05T12:24:51.4073813+05:30  [ERR] An exception occurred in the database while saving changes for context type '"CleanArchitecture.Infrastructure.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Repositories.NotificationRepository.AddAsync(Notification entity) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Repositories\NotificationRepository.cs:line 21
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 145
2025-12-05T12:24:51.4929601+05:30  [ERR] Failed to persist failed notification for "todayTest@gmail.com" (ed264509)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Repositories.NotificationRepository.AddAsync(Notification entity) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Repositories\NotificationRepository.cs:line 21
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 145
2025-12-05T12:24:51.4984220+05:30  [ERR] Failed executing DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (627a98df)
2025-12-05T12:24:51.5064388+05:30  [ERR] An exception occurred in the database while saving changes for context type '"CleanArchitecture.Infrastructure.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Repositories.NotificationRepository.AddAsync(Notification entity) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Repositories\NotificationRepository.cs:line 21
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 78
2025-12-05T12:24:51.5688286+05:30  [ERR] Unhandled exception while processing queued email to "admin@yourdomain.com" (7f8c6189)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Repositories.NotificationRepository.AddAsync(Notification entity) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Repositories\NotificationRepository.cs:line 21
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 78
2025-12-05T12:24:51.5752783+05:30  [ERR] Failed executing DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime2), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12),
(@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);" (627a98df)
2025-12-05T12:24:51.5833204+05:30  [ERR] An exception occurred in the database while saving changes for context type '"CleanArchitecture.Infrastructure.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Repositories.NotificationRepository.AddAsync(Notification entity) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Repositories\NotificationRepository.cs:line 21
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 145
2025-12-05T12:24:51.6484024+05:30  [ERR] Failed to persist failed notification for "admin@yourdomain.com" (ed264509)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AttemptCount'.
Invalid column name 'AttemptCount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b5ce0207-37e3-42c0-9c29-b4b0620b3552
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Repositories.NotificationRepository.AddAsync(Notification entity) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Repositories\NotificationRepository.cs:line 21
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 145
2025-12-05T12:27:38.4253942+05:30  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-12-05T12:27:38.4477298+05:30  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-12-05T12:27:38.4492942+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-12-05T12:27:38.4497570+05:30  [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-12-05T12:27:38.4686675+05:30  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-12-05T12:27:38.4795823+05:30  [INF] Applying migration '"20251205065726_Adding-New-Felds"'. (0e2ac64d)
2025-12-05T12:27:38.5248143+05:30  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Notifications] ADD [AttemptCount] int NOT NULL DEFAULT 0;" (0723d8ff)
2025-12-05T12:27:38.5263909+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251205065726_Adding-New-Felds', N'8.0.1');" (0723d8ff)
2025-12-05T12:27:49.5480251+05:30  [INF] Email background service started. (8e0d769c)
2025-12-05T12:27:49.6925686+05:30  [INF] Now listening on: "https://localhost:7283" (d826f4b8)
2025-12-05T12:27:49.6937358+05:30  [INF] Now listening on: "http://localhost:5117" (d826f4b8)
2025-12-05T12:27:49.7339587+05:30  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-12-05T12:27:49.7350947+05:30  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-12-05T12:27:49.7360099+05:30  [INF] Content root path: "D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi" (cc26f24e)
2025-12-05T12:27:50.4882687+05:30 0HNHJPEDA856L:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - null null (d509f86a)
2025-12-05T12:27:50.6267780+05:30 0HNHJPEDA856L:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 145.1388ms (74253ad3)
2025-12-05T12:27:50.6302152+05:30 0HNHJPEDA856L:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-12-05T12:27:50.6302464+05:30 0HNHJPEDA856L:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - null null (d509f86a)
2025-12-05T12:27:50.6323673+05:30 0HNHJPEDA856L:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - 200 null "application/javascript;charset=utf-8" 2.1546ms (74253ad3)
2025-12-05T12:27:50.6413859+05:30 0HNHJPEDA856L:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - 200 16533 "application/javascript; charset=utf-8" 11.4186ms (74253ad3)
2025-12-05T12:27:50.6460524+05:30 0HNHJPEDA856L:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - null null (d509f86a)
2025-12-05T12:27:50.6715336+05:30 0HNHJPEDA856L:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 25.5923ms (74253ad3)
2025-12-05T12:27:50.7132290+05:30 0HNHJPEDA856L:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-12-05T12:27:50.7372935+05:30 0HNHJPEDA856L:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 24.2117ms (74253ad3)
2025-12-05T12:39:02.6320214+05:30  [INF] Email background service started. (8e0d769c)
2025-12-05T12:39:02.7748263+05:30  [INF] Now listening on: "https://localhost:7283" (d826f4b8)
2025-12-05T12:39:02.7760910+05:30  [INF] Now listening on: "http://localhost:5117" (d826f4b8)
2025-12-05T12:39:02.8182614+05:30  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-12-05T12:39:02.8195875+05:30  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-12-05T12:39:02.8209518+05:30  [INF] Content root path: "D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi" (cc26f24e)
2025-12-05T12:39:03.6316627+05:30 0HNHJPKLVSSMI:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - null null (d509f86a)
2025-12-05T12:39:03.7762681+05:30 0HNHJPKLVSSMI:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-12-05T12:39:03.7763504+05:30 0HNHJPKLVSSMI:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - null null (d509f86a)
2025-12-05T12:39:03.7764710+05:30 0HNHJPKLVSSMI:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 150.3977ms (74253ad3)
2025-12-05T12:39:03.7784823+05:30 0HNHJPKLVSSMI:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - 200 null "application/javascript;charset=utf-8" 2.3094ms (74253ad3)
2025-12-05T12:39:03.7864094+05:30 0HNHJPKLVSSMI:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - 200 16533 "application/javascript; charset=utf-8" 10.2887ms (74253ad3)
2025-12-05T12:39:03.7922987+05:30 0HNHJPKLVSSMI:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - null null (d509f86a)
2025-12-05T12:39:03.8193670+05:30 0HNHJPKLVSSMI:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 27.1062ms (74253ad3)
2025-12-05T12:39:03.8612505+05:30 0HNHJPKLVSSMI:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-12-05T12:39:03.8863425+05:30 0HNHJPKLVSSMI:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 25.1416ms (74253ad3)
2025-12-05T12:39:12.0884391+05:30 0HNHJPKLVSSMI:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/api/email/test""" - null null (d509f86a)
2025-12-05T12:39:12.1007430+05:30 0HNHJPKLVSSMI:0000000B [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:39:12.1024268+05:30 0HNHJPKLVSSMI:0000000B [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:39:12.4066890+05:30 0HNHJPKLVSSMI:0000000B [INF] Received HTTP response headers after 296.6961ms - 429 (f0742c1f)
2025-12-05T12:39:12.4086847+05:30 0HNHJPKLVSSMI:0000000B [INF] End processing HTTP request after 313.899ms - 429 (7656b38e)
2025-12-05T12:39:12.4130215+05:30 0HNHJPKLVSSMI:0000000B [INF] Executing endpoint '"EmailTestController.TestEmail (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:39:12.4254189+05:30 0HNHJPKLVSSMI:0000000B [INF] Route matched with "{action = \"TestEmail\", controller = \"EmailTest\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestEmail()" on controller "EmailTestController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:39:22.7281943+05:30 0HNHJPKLVSSMI:0000000B [INF] Executing "OkObjectResult", writing value of type '"System.String"'. (605b4265)
2025-12-05T12:39:22.7346231+05:30 0HNHJPKLVSSMI:0000000B [INF] Executed action "EmailTestController.TestEmail (CleanArchitecture.WebApi)" in 10303.1704ms (afa2e885)
2025-12-05T12:39:22.7347035+05:30 0HNHJPKLVSSMI:0000000B [INF] Executed endpoint '"EmailTestController.TestEmail (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:39:22.7447814+05:30 0HNHJPKLVSSMI:0000000B [INF] HTTP Request Log: "{\"method\":\"GET\",\"path\":\"/api/email/test\",\"query\":\"\",\"requestBody\":null,\"statusCode\":200,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":10328}" (663ceef5)
2025-12-05T12:39:22.7452020+05:30 0HNHJPKLVSSMI:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/api/email/test""" - 200 null "application/json" 10656.9549ms (74253ad3)
2025-12-05T12:39:23.6981487+05:30  [INF] Executed DbCommand ("40"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:39:28.4512313+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpProtocolException: The SMTP server has unexpectedly disconnected: 5.7.0 Invalid credentials
   at MailKit.Net.Smtp.SmtpStream.ReadAheadAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.ReadResponseAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.SendCommandAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SendCommandInternalAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 60
2025-12-05T12:39:28.5159029+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpProtocolException: The SMTP server has unexpectedly disconnected: 5.7.0 Invalid credentials
   at MailKit.Net.Smtp.SmtpStream.ReadAheadAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.ReadResponseAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.SendCommandAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SendCommandInternalAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 60
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:39:28.5319046+05:30  [INF] Executed DbCommand ("9"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:39:36.9358366+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpProtocolException: The SMTP server has unexpectedly disconnected: 5.7.0 Invalid credentials
   at MailKit.Net.Smtp.SmtpStream.ReadAheadAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.ReadResponseAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.SendCommandAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SendCommandInternalAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 60
2025-12-05T12:39:36.9911998+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 2. Backoff 10s (82f39255)
MailKit.Net.Smtp.SmtpProtocolException: The SMTP server has unexpectedly disconnected: 5.7.0 Invalid credentials
   at MailKit.Net.Smtp.SmtpStream.ReadAheadAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.ReadResponseAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.SendCommandAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SendCommandInternalAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 60
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:39:36.9941051+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:39:50.4505777+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpProtocolException: The SMTP server has unexpectedly disconnected: 5.7.0 Invalid credentials
   at MailKit.Net.Smtp.SmtpStream.ReadAheadAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.ReadResponseAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.SendCommandAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SendCommandInternalAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 60
2025-12-05T12:39:50.5040133+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 3. Backoff 20s (82f39255)
MailKit.Net.Smtp.SmtpProtocolException: The SMTP server has unexpectedly disconnected: 5.7.0 Invalid credentials
   at MailKit.Net.Smtp.SmtpStream.ReadAheadAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.ReadResponseAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.SendCommandAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SendCommandInternalAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 60
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:39:50.5065255+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:40:10.5267740+05:30  [INF] Executed DbCommand ("4"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:40:10.5295098+05:30  [ERR] Failed to deliver email to "admin@embryon.test" after 3 attempts (a58b0ecd)
MailKit.Net.Smtp.SmtpProtocolException: The SMTP server has unexpectedly disconnected: 5.7.0 Invalid credentials
   at MailKit.Net.Smtp.SmtpStream.ReadAheadAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.ReadResponseAsync(CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpStream.SendCommandAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SendCommandInternalAsync(String command, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, CancellationToken cancellationToken)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 60
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:42:27.8521742+05:30  [INF] Email background service started. (8e0d769c)
2025-12-05T12:42:27.9897450+05:30  [INF] Now listening on: "https://localhost:7283" (d826f4b8)
2025-12-05T12:42:27.9911812+05:30  [INF] Now listening on: "http://localhost:5117" (d826f4b8)
2025-12-05T12:42:28.0363284+05:30  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-12-05T12:42:28.0399821+05:30  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-12-05T12:42:28.0430882+05:30  [INF] Content root path: "D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi" (cc26f24e)
2025-12-05T12:42:29.1469875+05:30 0HNHJPMJ0MHTO:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - null null (d509f86a)
2025-12-05T12:42:29.2792528+05:30 0HNHJPMJ0MHTO:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 136.3404ms (74253ad3)
2025-12-05T12:42:29.2821318+05:30 0HNHJPMJ0MHTO:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - null null (d509f86a)
2025-12-05T12:42:29.2821318+05:30 0HNHJPMJ0MHTO:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-12-05T12:42:29.2841620+05:30 0HNHJPMJ0MHTO:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - 200 null "application/javascript;charset=utf-8" 2.2007ms (74253ad3)
2025-12-05T12:42:29.2920400+05:30 0HNHJPMJ0MHTO:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - 200 16533 "application/javascript; charset=utf-8" 10.1445ms (74253ad3)
2025-12-05T12:42:29.2971537+05:30 0HNHJPMJ0MHTO:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - null null (d509f86a)
2025-12-05T12:42:29.3214015+05:30 0HNHJPMJ0MHTO:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 24.2815ms (74253ad3)
2025-12-05T12:42:29.3640527+05:30 0HNHJPMJ0MHTO:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-12-05T12:42:29.3878133+05:30 0HNHJPMJ0MHTO:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 23.8679ms (74253ad3)
2025-12-05T12:42:34.1080244+05:30 0HNHJPMJ0MHTO:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/api/email/test""" - null null (d509f86a)
2025-12-05T12:42:34.1241938+05:30 0HNHJPMJ0MHTO:0000000B [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:42:34.1260560+05:30 0HNHJPMJ0MHTO:0000000B [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:42:34.4486892+05:30 0HNHJPMJ0MHTO:0000000B [INF] Received HTTP response headers after 315.2136ms - 429 (f0742c1f)
2025-12-05T12:42:34.4505755+05:30 0HNHJPMJ0MHTO:0000000B [INF] End processing HTTP request after 333.0094ms - 429 (7656b38e)
2025-12-05T12:42:34.4551938+05:30 0HNHJPMJ0MHTO:0000000B [INF] Executing endpoint '"EmailTestController.TestEmail (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:42:34.4677386+05:30 0HNHJPMJ0MHTO:0000000B [INF] Route matched with "{action = \"TestEmail\", controller = \"EmailTest\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestEmail()" on controller "EmailTestController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:42:50.6321198+05:30 0HNHJPMJ0MHTO:0000000B [INF] Executing "OkObjectResult", writing value of type '"System.String"'. (605b4265)
2025-12-05T12:42:50.6350048+05:30 0HNHJPMJ0MHTO:0000000B [INF] Executed action "EmailTestController.TestEmail (CleanArchitecture.WebApi)" in 16164.7726ms (afa2e885)
2025-12-05T12:42:50.6350677+05:30 0HNHJPMJ0MHTO:0000000B [INF] Executed endpoint '"EmailTestController.TestEmail (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:42:59.9027637+05:30 0HNHJPMJ0MHTO:0000000B [INF] HTTP Request Log: "{\"method\":\"GET\",\"path\":\"/api/email/test\",\"query\":\"\",\"requestBody\":null,\"statusCode\":200,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":25435}" (663ceef5)
2025-12-05T12:42:59.9032602+05:30 0HNHJPMJ0MHTO:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/api/email/test""" - 200 null "application/json" 25795.393ms (74253ad3)
2025-12-05T12:43:00.8160368+05:30  [INF] Executed DbCommand ("36"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:43:05.9120206+05:30  [INF] Executed DbCommand ("7"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:43:05.9224885+05:30  [INF] Email sent to "admin@embryon.test" (type="test") (07c3b7b7)
2025-12-05T12:46:01.0173063+05:30 0HNHJPMJ0MHTP:00000001 [INF] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T12:46:01.0192661+05:30 0HNHJPMJ0MHTP:00000001 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:46:01.0203463+05:30 0HNHJPMJ0MHTP:00000001 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:46:01.3145477+05:30 0HNHJPMJ0MHTP:00000001 [INF] Received HTTP response headers after 292.1614ms - 429 (f0742c1f)
2025-12-05T12:46:01.3158790+05:30 0HNHJPMJ0MHTP:00000001 [INF] End processing HTTP request after 296.3766ms - 429 (7656b38e)
2025-12-05T12:46:01.3214065+05:30 0HNHJPMJ0MHTP:00000001 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:46:01.3234579+05:30 0HNHJPMJ0MHTP:00000001 [INF] HTTP Request Log: "{\"method\":\"OPTIONS\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":204,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":6}" (663ceef5)
2025-12-05T12:46:01.3235991+05:30 0HNHJPMJ0MHTP:00000001 [INF] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - 204 null null 306.3674ms (74253ad3)
2025-12-05T12:46:01.3248819+05:30 0HNHJPMJ0MHTP:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 245 (d509f86a)
2025-12-05T12:46:01.3264254+05:30 0HNHJPMJ0MHTP:00000003 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:46:01.3275180+05:30 0HNHJPMJ0MHTP:00000003 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:46:01.6035072+05:30 0HNHJPMJ0MHTP:00000003 [INF] Received HTTP response headers after 273.989ms - 429 (f0742c1f)
2025-12-05T12:46:01.6049644+05:30 0HNHJPMJ0MHTP:00000003 [INF] End processing HTTP request after 278.3238ms - 429 (7656b38e)
2025-12-05T12:46:01.6070561+05:30 0HNHJPMJ0MHTP:00000003 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:46:01.6072819+05:30 0HNHJPMJ0MHTP:00000003 [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:46:01.6134584+05:30 0HNHJPMJ0MHTP:00000003 [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:46:10.4865516+05:30 0HNHJPMJ0MHTP:00000003 [INF] Executed DbCommand ("16"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ContactSubmissions] ([Id], [AdditionalData], [City], [CountryId], [CreatedAt], [DeletedAt], [Email], [FirstName], [IpAddress], [LastName], [Message], [Phone], [PhoneCountryCode], [State], [Subject], [UpdatedAt], [UserAgent])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);" (0723d8ff)
2025-12-05T12:46:37.6216193+05:30 0HNHJPMJ0MHTP:00000003 [INF] Executing "CreatedAtActionResult", writing value of type '"CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto"'. (605b4265)
2025-12-05T12:46:37.6283205+05:30  [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:46:37.6463536+05:30 0HNHJPMJ0MHTP:00000003 [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 36032.8167ms (afa2e885)
2025-12-05T12:46:37.6466983+05:30 0HNHJPMJ0MHTP:00000003 [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:46:37.6518242+05:30 0HNHJPMJ0MHTP:00000003 [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"Today\",\"lastName\":\"Test\",\"email\":\"saurabh.lodhi@monkoutsourcing.com\",\"phone\":\"9089908989\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"UP\",\"city\":\"Noida\",\"subject\":\"Egg \u0026 Sperm Donation\",\"message\":\"test\",\"captchaPassed\":true},\"statusCode\":201,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":36044}" (663ceef5)
2025-12-05T12:46:37.6548406+05:30 0HNHJPMJ0MHTP:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 201 null "application/json" 36329.9712ms (74253ad3)
2025-12-05T12:46:43.0071493+05:30  [INF] Executed DbCommand ("7"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:46:43.0084431+05:30  [INF] Email sent to "saurabh.lodhi@monkoutsourcing.com" (type="contact_user") (07c3b7b7)
2025-12-05T12:46:43.0129949+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:46:47.4098407+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T12:46:47.4581484+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:46:47.4608600+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:46:57.9744955+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:46:57.9757748+05:30  [INF] Email sent to "admin@embryon.test" (type="contact_admin") (07c3b7b7)
2025-12-05T12:57:59.3093890+05:30 0HNHJPMJ0MHTP:00000005 [INF] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T12:57:59.3135908+05:30 0HNHJPMJ0MHTP:00000005 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:57:59.3158204+05:30 0HNHJPMJ0MHTP:00000005 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:57:59.4680127+05:30 0HNHJPMJ0MHTP:00000007 [INF] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T12:57:59.4698984+05:30 0HNHJPMJ0MHTP:00000007 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:57:59.4711598+05:30 0HNHJPMJ0MHTP:00000007 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:57:59.6176995+05:30 0HNHJPMJ0MHTP:00000005 [INF] Received HTTP response headers after 300.2887ms - 429 (f0742c1f)
2025-12-05T12:57:59.6189775+05:30 0HNHJPMJ0MHTP:00000005 [INF] End processing HTTP request after 307.531ms - 429 (7656b38e)
2025-12-05T12:57:59.6191494+05:30 0HNHJPMJ0MHTP:00000005 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:57:59.6205395+05:30 0HNHJPMJ0MHTP:00000005 [INF] HTTP Request Log: "{\"method\":\"OPTIONS\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":204,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":0}" (663ceef5)
2025-12-05T12:57:59.6207115+05:30 0HNHJPMJ0MHTP:00000009 [INF] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T12:57:59.6207570+05:30 0HNHJPMJ0MHTP:00000005 [INF] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - 204 null null 311.8896ms (74253ad3)
2025-12-05T12:57:59.6220431+05:30 0HNHJPMJ0MHTP:00000009 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:57:59.6246233+05:30 0HNHJPMJ0MHTP:00000009 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:57:59.6265698+05:30 0HNHJPMJ0MHTP:0000000B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 248 (d509f86a)
2025-12-05T12:57:59.6279675+05:30 0HNHJPMJ0MHTP:0000000B [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:57:59.6292042+05:30 0HNHJPMJ0MHTP:0000000B [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:57:59.7664572+05:30 0HNHJPMJ0MHTP:00000007 [INF] Received HTTP response headers after 291.8326ms - 429 (f0742c1f)
2025-12-05T12:57:59.7678310+05:30 0HNHJPMJ0MHTP:00000007 [INF] End processing HTTP request after 298.354ms - 429 (7656b38e)
2025-12-05T12:57:59.7679499+05:30 0HNHJPMJ0MHTP:00000007 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:57:59.7691571+05:30 0HNHJPMJ0MHTP:00000007 [INF] HTTP Request Log: "{\"method\":\"OPTIONS\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":204,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":0}" (663ceef5)
2025-12-05T12:57:59.7692478+05:30 0HNHJPMJ0MHTP:00000007 [INF] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - 204 null null 301.2769ms (74253ad3)
2025-12-05T12:57:59.7702516+05:30 0HNHJPMJ0MHTP:0000000D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 248 (d509f86a)
2025-12-05T12:57:59.7715434+05:30 0HNHJPMJ0MHTP:0000000D [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:57:59.7725767+05:30 0HNHJPMJ0MHTP:0000000D [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:57:59.7875528+05:30 0HNHJPMJ0MHTP:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 248 (d509f86a)
2025-12-05T12:57:59.7888341+05:30 0HNHJPMJ0MHTP:0000000F [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:57:59.7899060+05:30 0HNHJPMJ0MHTP:0000000F [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:57:59.9108878+05:30 0HNHJPMJ0MHTP:00000009 [INF] Received HTTP response headers after 284.2059ms - 429 (f0742c1f)
2025-12-05T12:57:59.9124483+05:30 0HNHJPMJ0MHTP:00000009 [INF] End processing HTTP request after 290.0335ms - 429 (7656b38e)
2025-12-05T12:57:59.9133163+05:30 0HNHJPMJ0MHTP:00000009 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:57:59.9138344+05:30 0HNHJPMJ0MHTP:0000000B [INF] Received HTTP response headers after 282.2278ms - 429 (f0742c1f)
2025-12-05T12:57:59.9150930+05:30 0HNHJPMJ0MHTP:0000000B [INF] End processing HTTP request after 286.9626ms - 429 (7656b38e)
2025-12-05T12:57:59.9161284+05:30 0HNHJPMJ0MHTP:00000009 [INF] HTTP Request Log: "{\"method\":\"OPTIONS\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":204,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":0}" (663ceef5)
2025-12-05T12:57:59.9162088+05:30 0HNHJPMJ0MHTP:0000000B [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:57:59.9162273+05:30 0HNHJPMJ0MHTP:00000009 [INF] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - 204 null null 295.6561ms (74253ad3)
2025-12-05T12:57:59.9163128+05:30 0HNHJPMJ0MHTP:0000000B [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:57:59.9165074+05:30 0HNHJPMJ0MHTP:0000000B [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:57:59.9173339+05:30 0HNHJPMJ0MHTP:00000011 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 248 (d509f86a)
2025-12-05T12:57:59.9185951+05:30 0HNHJPMJ0MHTP:00000011 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T12:57:59.9196472+05:30 0HNHJPMJ0MHTP:00000011 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T12:58:01.7830158+05:30 0HNHJPMJ0MHTP:0000000D [INF] Received HTTP response headers after 1816.8426ms - 429 (f0742c1f)
2025-12-05T12:58:01.7866358+05:30 0HNHJPMJ0MHTP:0000000D [INF] End processing HTTP request after 2012.6716ms - 429 (7656b38e)
2025-12-05T12:58:01.7872607+05:30 0HNHJPMJ0MHTP:0000000D [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:58:01.7872955+05:30 0HNHJPMJ0MHTP:0000000D [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:58:01.7873544+05:30 0HNHJPMJ0MHTP:0000000D [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:58:01.7879357+05:30 0HNHJPMJ0MHTP:0000000F [INF] Received HTTP response headers after 1994.0611ms - 429 (f0742c1f)
2025-12-05T12:58:01.7890285+05:30 0HNHJPMJ0MHTP:00000011 [INF] Received HTTP response headers after 1864.3095ms - 429 (f0742c1f)
2025-12-05T12:58:01.7901513+05:30 0HNHJPMJ0MHTP:0000000F [INF] End processing HTTP request after 2000.7322ms - 429 (7656b38e)
2025-12-05T12:58:01.7907614+05:30 0HNHJPMJ0MHTP:0000000F [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:58:01.7912566+05:30 0HNHJPMJ0MHTP:0000000F [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:58:01.7912670+05:30 0HNHJPMJ0MHTP:00000011 [INF] End processing HTTP request after 1872.0163ms - 429 (7656b38e)
2025-12-05T12:58:01.7913067+05:30 0HNHJPMJ0MHTP:0000000F [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:58:01.7913632+05:30 0HNHJPMJ0MHTP:00000011 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T12:58:01.7913917+05:30 0HNHJPMJ0MHTP:00000011 [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T12:58:01.7914197+05:30 0HNHJPMJ0MHTP:00000011 [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T12:58:03.1645776+05:30 0HNHJPMJ0MHTP:0000000B [INF] Executed DbCommand ("665"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ContactSubmissions] ([Id], [AdditionalData], [City], [CountryId], [CreatedAt], [DeletedAt], [Email], [FirstName], [IpAddress], [LastName], [Message], [Phone], [PhoneCountryCode], [State], [Subject], [UpdatedAt], [UserAgent])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);" (0723d8ff)
2025-12-05T12:58:03.5058646+05:30 0HNHJPMJ0MHTP:0000000B [INF] Executing "CreatedAtActionResult", writing value of type '"CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto"'. (605b4265)
2025-12-05T12:58:03.5098357+05:30 0HNHJPMJ0MHTP:0000000D [INF] Executed DbCommand ("337"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ContactSubmissions] ([Id], [AdditionalData], [City], [CountryId], [CreatedAt], [DeletedAt], [Email], [FirstName], [IpAddress], [LastName], [Message], [Phone], [PhoneCountryCode], [State], [Subject], [UpdatedAt], [UserAgent])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);" (0723d8ff)
2025-12-05T12:58:03.5123317+05:30 0HNHJPMJ0MHTP:0000000B [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 3595.7815ms (afa2e885)
2025-12-05T12:58:03.5123679+05:30 0HNHJPMJ0MHTP:0000000B [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:58:03.5819358+05:30 0HNHJPMJ0MHTP:0000000B [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"MailTrap\",\"lastName\":\"Test\",\"email\":\"saurabh.lodhi@monkoutsourcing.com\",\"phone\":\"9089908989\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"UP\",\"city\":\"Noida\",\"subject\":\"Egg \u0026 Sperm Donation\",\"message\":\"test\",\"captchaPassed\":true},\"statusCode\":201,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":3599}" (663ceef5)
2025-12-05T12:58:03.7163034+05:30 0HNHJPMJ0MHTP:0000000B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 201 null "application/json" 4090.9824ms (74253ad3)
2025-12-05T12:58:03.7164070+05:30 0HNHJPMJ0MHTP:0000000D [INF] Executing "CreatedAtActionResult", writing value of type '"CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto"'. (605b4265)
2025-12-05T12:58:03.7190037+05:30 0HNHJPMJ0MHTP:0000000D [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 1931.6168ms (afa2e885)
2025-12-05T12:58:03.7190362+05:30 0HNHJPMJ0MHTP:0000000D [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:58:03.7196293+05:30 0HNHJPMJ0MHTP:00000011 [INF] Executed DbCommand ("66"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ContactSubmissions] ([Id], [AdditionalData], [City], [CountryId], [CreatedAt], [DeletedAt], [Email], [FirstName], [IpAddress], [LastName], [Message], [Phone], [PhoneCountryCode], [State], [Subject], [UpdatedAt], [UserAgent])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);" (0723d8ff)
2025-12-05T12:58:03.7215771+05:30 0HNHJPMJ0MHTP:0000000D [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"MailTrap\",\"lastName\":\"Test\",\"email\":\"saurabh.lodhi@monkoutsourcing.com\",\"phone\":\"9089908989\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"UP\",\"city\":\"Noida\",\"subject\":\"Egg \u0026 Sperm Donation\",\"message\":\"test\",\"captchaPassed\":true},\"statusCode\":201,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":1932}" (663ceef5)
2025-12-05T12:58:03.7222876+05:30 0HNHJPMJ0MHTP:0000000D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 201 null "application/json" 3952.1666ms (74253ad3)
2025-12-05T12:58:03.9954888+05:30 0HNHJPMJ0MHTP:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ContactSubmissions] ([Id], [AdditionalData], [City], [CountryId], [CreatedAt], [DeletedAt], [Email], [FirstName], [IpAddress], [LastName], [Message], [Phone], [PhoneCountryCode], [State], [Subject], [UpdatedAt], [UserAgent])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);" (0723d8ff)
2025-12-05T12:58:04.1158788+05:30 0HNHJPMJ0MHTP:00000011 [INF] Executing "CreatedAtActionResult", writing value of type '"CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto"'. (605b4265)
2025-12-05T12:58:04.1160636+05:30 0HNHJPMJ0MHTP:00000011 [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 2324.6259ms (afa2e885)
2025-12-05T12:58:04.1163206+05:30 0HNHJPMJ0MHTP:00000011 [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:58:04.1163642+05:30  [INF] Executed DbCommand ("278"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:58:04.4100618+05:30 0HNHJPMJ0MHTP:00000011 [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"MailTrap\",\"lastName\":\"Test\",\"email\":\"saurabh.lodhi@monkoutsourcing.com\",\"phone\":\"9089908989\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"UP\",\"city\":\"Noida\",\"subject\":\"Egg \u0026 Sperm Donation\",\"message\":\"test\",\"captchaPassed\":true},\"statusCode\":201,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":2326}" (663ceef5)
2025-12-05T12:58:04.4108343+05:30 0HNHJPMJ0MHTP:00000011 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 201 null "application/json" 4493.5916ms (74253ad3)
2025-12-05T12:58:04.8515557+05:30 0HNHJPMJ0MHTP:0000000F [INF] Executing "CreatedAtActionResult", writing value of type '"CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto"'. (605b4265)
2025-12-05T12:58:04.8517865+05:30 0HNHJPMJ0MHTP:0000000F [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 3060.4448ms (afa2e885)
2025-12-05T12:58:04.8518369+05:30 0HNHJPMJ0MHTP:0000000F [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T12:58:04.8536021+05:30 0HNHJPMJ0MHTP:0000000F [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"MailTrap\",\"lastName\":\"Test\",\"email\":\"saurabh.lodhi@monkoutsourcing.com\",\"phone\":\"9089908989\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"UP\",\"city\":\"Noida\",\"subject\":\"Egg \u0026 Sperm Donation\",\"message\":\"test\",\"captchaPassed\":true},\"statusCode\":201,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":3061}" (663ceef5)
2025-12-05T12:58:04.8537820+05:30 0HNHJPMJ0MHTP:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 201 null "application/json" 5066.3653ms (74253ad3)
2025-12-05T12:58:08.6311804+05:30  [INF] Executed DbCommand ("15"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:08.6336589+05:30  [INF] Email sent to "saurabh.lodhi@monkoutsourcing.com" (type="contact_user") (07c3b7b7)
2025-12-05T12:58:08.6366054+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:58:12.5081112+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T12:58:12.5551429+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:58:12.5577530+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:21.2872753+05:30  [INF] Executed DbCommand ("2"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:21.2887552+05:30  [INF] Email sent to "admin@embryon.test" (type="contact_admin") (07c3b7b7)
2025-12-05T12:58:21.2913230+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:58:25.5026161+05:30  [ERR] Failed to send email to "saurabh.lodhi@monkoutsourcing.com" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T12:58:25.5459366+05:30  [WRN] Failed to send email to "saurabh.lodhi@monkoutsourcing.com" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:58:25.5483608+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:34.4997283+05:30  [INF] Executed DbCommand ("5"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:34.5010646+05:30  [INF] Email sent to "saurabh.lodhi@monkoutsourcing.com" (type="contact_user") (07c3b7b7)
2025-12-05T12:58:34.5048686+05:30  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:58:38.0137675+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T12:58:38.0560655+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:58:38.0619640+05:30  [INF] Executed DbCommand ("4"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:46.9287024+05:30  [INF] Executed DbCommand ("6"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:46.9304734+05:30  [INF] Email sent to "admin@embryon.test" (type="contact_admin") (07c3b7b7)
2025-12-05T12:58:46.9346982+05:30  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:58:50.4780089+05:30  [ERR] Failed to send email to "saurabh.lodhi@monkoutsourcing.com" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T12:58:50.5206012+05:30  [WRN] Failed to send email to "saurabh.lodhi@monkoutsourcing.com" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:58:50.7186704+05:30  [INF] Executed DbCommand ("195"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:59.7983766+05:30  [INF] Executed DbCommand ("8"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:58:59.7996119+05:30  [INF] Email sent to "saurabh.lodhi@monkoutsourcing.com" (type="contact_user") (07c3b7b7)
2025-12-05T12:58:59.8033772+05:30  [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:59:03.1809446+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T12:59:03.2230060+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:59:03.2252512+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:59:13.0415687+05:30  [INF] Executed DbCommand ("3"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:59:13.0428876+05:30  [INF] Email sent to "admin@embryon.test" (type="contact_admin") (07c3b7b7)
2025-12-05T12:59:13.0458812+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:59:17.2096830+05:30  [ERR] Failed to send email to "saurabh.lodhi@monkoutsourcing.com" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T12:59:17.2516029+05:30  [WRN] Failed to send email to "saurabh.lodhi@monkoutsourcing.com" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:59:17.2541725+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:59:27.3687572+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:59:27.3699035+05:30  [INF] Email sent to "saurabh.lodhi@monkoutsourcing.com" (type="contact_user") (07c3b7b7)
2025-12-05T12:59:27.3724209+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T12:59:31.9290363+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T12:59:31.9714684+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T12:59:31.9736619+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:59:41.9111359+05:30  [INF] Executed DbCommand ("4"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T12:59:41.9124736+05:30  [INF] Email sent to "admin@embryon.test" (type="contact_admin") (07c3b7b7)
2025-12-05T14:52:13.1075057+05:30  [INF] Email background service started. (8e0d769c)
2025-12-05T14:52:13.2591520+05:30  [INF] Now listening on: "https://localhost:7283" (d826f4b8)
2025-12-05T14:52:13.2603819+05:30  [INF] Now listening on: "http://localhost:5117" (d826f4b8)
2025-12-05T14:52:13.3020951+05:30  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-12-05T14:52:13.3036885+05:30  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-12-05T14:52:13.3049534+05:30  [INF] Content root path: "D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi" (cc26f24e)
2025-12-05T14:52:14.1019947+05:30 0HNHJRV3A26U8:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - null null (d509f86a)
2025-12-05T14:52:14.2597726+05:30 0HNHJRV3A26U8:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 163.5752ms (74253ad3)
2025-12-05T14:52:14.2656733+05:30 0HNHJRV3A26U8:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - null null (d509f86a)
2025-12-05T14:52:14.2656733+05:30 0HNHJRV3A26U8:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-12-05T14:52:14.2676615+05:30 0HNHJRV3A26U8:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - 200 null "application/javascript;charset=utf-8" 2.0884ms (74253ad3)
2025-12-05T14:52:14.2751101+05:30 0HNHJRV3A26U8:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - 200 16533 "application/javascript; charset=utf-8" 9.5717ms (74253ad3)
2025-12-05T14:52:14.2787979+05:30 0HNHJRV3A26U8:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - null null (d509f86a)
2025-12-05T14:52:14.3200339+05:30 0HNHJRV3A26U8:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 41.5017ms (74253ad3)
2025-12-05T14:52:14.3558554+05:30 0HNHJRV3A26U8:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-12-05T14:52:14.3790749+05:30 0HNHJRV3A26U8:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 23.464ms (74253ad3)
2025-12-05T14:52:18.8557091+05:30 0HNHJRV3A26U9:00000001 [INF] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T14:52:18.8665446+05:30 0HNHJRV3A26U9:00000001 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T14:52:18.8684827+05:30 0HNHJRV3A26U9:00000001 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T14:52:19.1834933+05:30 0HNHJRV3A26U9:00000001 [INF] Received HTTP response headers after 307.7227ms - 429 (f0742c1f)
2025-12-05T14:52:19.1853209+05:30 0HNHJRV3A26U9:00000001 [INF] End processing HTTP request after 324.2065ms - 429 (7656b38e)
2025-12-05T14:52:19.1885395+05:30 0HNHJRV3A26U9:00000001 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T14:52:19.1964726+05:30 0HNHJRV3A26U9:00000001 [INF] HTTP Request Log: "{\"method\":\"OPTIONS\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":204,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":2}" (663ceef5)
2025-12-05T14:52:19.1968839+05:30 0HNHJRV3A26U9:00000001 [INF] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - 204 null null 341.2697ms (74253ad3)
2025-12-05T14:52:19.1981072+05:30 0HNHJRV3A26U9:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 291 (d509f86a)
2025-12-05T14:52:19.2006760+05:30 0HNHJRV3A26U9:00000003 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T14:52:19.2018006+05:30 0HNHJRV3A26U9:00000003 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T14:52:19.4677462+05:30 0HNHJRV3A26U9:00000003 [INF] Received HTTP response headers after 263.9441ms - 429 (f0742c1f)
2025-12-05T14:52:19.4689259+05:30 0HNHJRV3A26U9:00000003 [INF] End processing HTTP request after 268.5319ms - 429 (7656b38e)
2025-12-05T14:52:19.4745452+05:30 0HNHJRV3A26U9:00000003 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T14:52:19.4769091+05:30 0HNHJRV3A26U9:00000003 [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T14:52:19.4920845+05:30 0HNHJRV3A26U9:00000003 [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T14:52:19.7102662+05:30 0HNHJRV3A26U9:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-12-05T14:52:19.7217836+05:30 0HNHJRV3A26U9:00000003 [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 227.2798ms (afa2e885)
2025-12-05T14:52:19.7218389+05:30 0HNHJRV3A26U9:00000003 [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T14:52:19.7250907+05:30 0HNHJRV3A26U9:00000003 [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"Captcha \",\"lastName\":\"Test\",\"email\":\"CaptchaTest@example.com\",\"phone\":\"9898787898\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"Delhi\",\"city\":\"New Delhi\",\"subject\":\"Egg Donation\",\"message\":\"This is Captcha Testing\",\"captchaToken\":\"XXXX.DUMMY.TOKEN.XXXX\",\"ipAddress\":null},\"statusCode\":400,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":253}" (663ceef5)
2025-12-05T14:52:19.7264791+05:30 0HNHJRV3A26U9:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 400 null "application/problem+json; charset=utf-8" 528.4326ms (74253ad3)
2025-12-05T14:52:35.5334518+05:30 0HNHJRV3A26U9:00000005 [INF] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T14:52:35.5363835+05:30 0HNHJRV3A26U9:00000005 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T14:52:35.5376157+05:30 0HNHJRV3A26U9:00000005 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T14:52:35.8241132+05:30 0HNHJRV3A26U9:00000005 [INF] Received HTTP response headers after 280.4948ms - 429 (f0742c1f)
2025-12-05T14:52:35.8257648+05:30 0HNHJRV3A26U9:00000005 [INF] End processing HTTP request after 290.365ms - 429 (7656b38e)
2025-12-05T14:52:35.8260827+05:30 0HNHJRV3A26U9:00000005 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T14:52:35.8274891+05:30 0HNHJRV3A26U9:00000005 [INF] HTTP Request Log: "{\"method\":\"OPTIONS\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":204,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":0}" (663ceef5)
2025-12-05T14:52:35.8275843+05:30 0HNHJRV3A26U9:00000005 [INF] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - 204 null null 294.4584ms (74253ad3)
2025-12-05T14:52:35.8287066+05:30 0HNHJRV3A26U9:00000007 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 291 (d509f86a)
2025-12-05T14:52:35.8302425+05:30 0HNHJRV3A26U9:00000007 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T14:52:35.8313570+05:30 0HNHJRV3A26U9:00000007 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T14:52:36.0979930+05:30 0HNHJRV3A26U9:00000007 [INF] Received HTTP response headers after 264.1299ms - 429 (f0742c1f)
2025-12-05T14:52:36.0998472+05:30 0HNHJRV3A26U9:00000007 [INF] End processing HTTP request after 269.1553ms - 429 (7656b38e)
2025-12-05T14:52:36.1000864+05:30 0HNHJRV3A26U9:00000007 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T14:52:36.1002022+05:30 0HNHJRV3A26U9:00000007 [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T14:52:36.1003867+05:30 0HNHJRV3A26U9:00000007 [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T14:52:36.1065088+05:30 0HNHJRV3A26U9:00000007 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-12-05T14:52:36.1066708+05:30 0HNHJRV3A26U9:00000007 [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 6.2449ms (afa2e885)
2025-12-05T14:52:36.1066863+05:30 0HNHJRV3A26U9:00000007 [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T14:52:36.1089089+05:30 0HNHJRV3A26U9:00000007 [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"Captcha \",\"lastName\":\"Test\",\"email\":\"CaptchaTest@example.com\",\"phone\":\"9898787898\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"Delhi\",\"city\":\"New Delhi\",\"subject\":\"Egg Donation\",\"message\":\"This is Captcha Testing\",\"captchaToken\":\"XXXX.DUMMY.TOKEN.XXXX\",\"ipAddress\":null},\"statusCode\":400,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":6}" (663ceef5)
2025-12-05T14:52:36.1093581+05:30 0HNHJRV3A26U9:00000007 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 400 null "application/problem+json; charset=utf-8" 280.7954ms (74253ad3)
2025-12-05T14:56:19.5461561+05:30  [INF] Email background service started. (8e0d769c)
2025-12-05T14:56:19.6931577+05:30  [INF] Now listening on: "https://localhost:7283" (d826f4b8)
2025-12-05T14:56:19.6945966+05:30  [INF] Now listening on: "http://localhost:5117" (d826f4b8)
2025-12-05T14:56:19.7392512+05:30  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-12-05T14:56:19.7406763+05:30  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-12-05T14:56:19.7418895+05:30  [INF] Content root path: "D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi" (cc26f24e)
2025-12-05T14:56:20.0961282+05:30 0HNHJS1CN6R6K:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - null null (d509f86a)
2025-12-05T14:56:20.2225195+05:30 0HNHJS1CN6R6K:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 130.349ms (74253ad3)
2025-12-05T14:56:20.2257988+05:30 0HNHJS1CN6R6K:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - null null (d509f86a)
2025-12-05T14:56:20.2257987+05:30 0HNHJS1CN6R6K:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-12-05T14:56:20.2277261+05:30 0HNHJS1CN6R6K:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/index.js""" - 200 null "application/javascript;charset=utf-8" 1.961ms (74253ad3)
2025-12-05T14:56:20.2408420+05:30 0HNHJS1CN6R6K:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - null null (d509f86a)
2025-12-05T14:56:20.2410374+05:30 0HNHJS1CN6R6K:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_framework/aspnetcore-browser-refresh.js""" - 200 16533 "application/javascript; charset=utf-8" 15.381ms (74253ad3)
2025-12-05T14:56:20.2678461+05:30 0HNHJS1CN6R6K:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 27.1855ms (74253ad3)
2025-12-05T14:56:20.3120238+05:30 0HNHJS1CN6R6K:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-12-05T14:56:20.3352172+05:30 0HNHJS1CN6R6K:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7283""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 23.3786ms (74253ad3)
2025-12-05T14:57:22.6593865+05:30 0HNHJS1CN6R6L:00000001 [INF] Request starting "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - null null (d509f86a)
2025-12-05T14:57:22.6697761+05:30 0HNHJS1CN6R6L:00000001 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T14:57:22.6715158+05:30 0HNHJS1CN6R6L:00000001 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T14:57:22.9961705+05:30 0HNHJS1CN6R6L:00000001 [INF] Received HTTP response headers after 317.454ms - 429 (f0742c1f)
2025-12-05T14:57:22.9980924+05:30 0HNHJS1CN6R6L:00000001 [INF] End processing HTTP request after 333.4203ms - 429 (7656b38e)
2025-12-05T14:57:23.0013956+05:30 0HNHJS1CN6R6L:00000001 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T14:57:23.0099586+05:30 0HNHJS1CN6R6L:00000001 [INF] HTTP Request Log: "{\"method\":\"OPTIONS\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":null,\"statusCode\":204,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":2}" (663ceef5)
2025-12-05T14:57:23.0104007+05:30 0HNHJS1CN6R6L:00000001 [INF] Request finished "HTTP/2" "OPTIONS" "https"://"localhost:7283""""/api/ContactSubmissions""" - 204 null null 351.1279ms (74253ad3)
2025-12-05T14:57:23.0120391+05:30 0HNHJS1CN6R6L:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - "application/json" 291 (d509f86a)
2025-12-05T14:57:23.0142469+05:30 0HNHJS1CN6R6L:00000003 [INF] Start processing HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (338f1c77)
2025-12-05T14:57:23.0152212+05:30 0HNHJS1CN6R6L:00000003 [INF] Sending HTTP request "GET" "https://ipapi.co/0.0.0.1/json/" (2e7ac211)
2025-12-05T14:57:23.3467195+05:30 0HNHJS1CN6R6L:00000003 [INF] Received HTTP response headers after 330.1282ms - 429 (f0742c1f)
2025-12-05T14:57:23.3478676+05:30 0HNHJS1CN6R6L:00000003 [INF] End processing HTTP request after 333.6662ms - 429 (7656b38e)
2025-12-05T14:57:23.3537528+05:30 0HNHJS1CN6R6L:00000003 [INF] CORS policy execution successful. (5409d6ef)
2025-12-05T14:57:23.3562090+05:30 0HNHJS1CN6R6L:00000003 [INF] Executing endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (500cc934)
2025-12-05T14:57:23.3726803+05:30 0HNHJS1CN6R6L:00000003 [INF] Route matched with "{action = \"Create\", controller = \"ContactSubmissions\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto]] Create(CleanArchitecture.Application.DTOs.Contact.CreateContactSubmissionDto)" on controller "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController" ("CleanArchitecture.WebApi"). (122b2fdf)
2025-12-05T14:57:25.3661024+05:30 0HNHJS1CN6R6L:00000003 [INF] Start processing HTTP request "POST" "https://challenges.cloudflare.com/turnstile/v0/siteverify" (338f1c77)
2025-12-05T14:57:25.3671907+05:30 0HNHJS1CN6R6L:00000003 [INF] Sending HTTP request "POST" "https://challenges.cloudflare.com/turnstile/v0/siteverify" (2e7ac211)
2025-12-05T14:57:25.4141201+05:30 0HNHJS1CN6R6L:00000003 [INF] Received HTTP response headers after 45.8324ms - 200 (f0742c1f)
2025-12-05T14:57:25.4151898+05:30 0HNHJS1CN6R6L:00000003 [INF] End processing HTTP request after 49.1602ms - 200 (7656b38e)
2025-12-05T14:57:29.7876487+05:30 0HNHJS1CN6R6L:00000003 [INF] Executed DbCommand ("46"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ContactSubmissions] ([Id], [AdditionalData], [City], [CountryId], [CreatedAt], [DeletedAt], [Email], [FirstName], [IpAddress], [LastName], [Message], [Phone], [PhoneCountryCode], [State], [Subject], [UpdatedAt], [UserAgent])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);" (0723d8ff)
2025-12-05T14:57:31.5816555+05:30 0HNHJS1CN6R6L:00000003 [INF] Executing "CreatedAtActionResult", writing value of type '"CleanArchitecture.Application.DTOs.Contact.ContactSubmissionDto"'. (605b4265)
2025-12-05T14:57:31.6040908+05:30 0HNHJS1CN6R6L:00000003 [INF] Executed action "CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)" in 8228.8078ms (afa2e885)
2025-12-05T14:57:31.6044435+05:30 0HNHJS1CN6R6L:00000003 [INF] Executed endpoint '"CleanArchitecture.WebApi.Controllers.ContactSubmissionsController.Create (CleanArchitecture.WebApi)"' (99874f2b)
2025-12-05T14:57:31.6102225+05:30 0HNHJS1CN6R6L:00000003 [INF] HTTP Request Log: "{\"method\":\"POST\",\"path\":\"/api/ContactSubmissions\",\"query\":\"\",\"requestBody\":{\"firstName\":\"Captcha \",\"lastName\":\"Test\",\"email\":\"CaptchaTest@example.com\",\"phone\":\"9898787898\",\"phoneCountryCode\":\"\u002B91\",\"countryId\":null,\"state\":\"Delhi\",\"city\":\"New Delhi\",\"subject\":\"Egg \u0026 Sperm Donation\",\"message\":\"Captcha Testing\",\"captchaToken\":\"XXXX.DUMMY.TOKEN.XXXX\",\"ipAddress\":null},\"statusCode\":201,\"ip\":\"::1\",\"userAgent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0\",\"durationMs\":8260}" (663ceef5)
2025-12-05T14:57:31.6164257+05:30 0HNHJS1CN6R6L:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7283""""/api/ContactSubmissions""" - 201 null "application/json" 8604.3852ms (74253ad3)
2025-12-05T14:57:31.7619017+05:30  [INF] Executed DbCommand ("111"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T14:57:36.7428674+05:30  [INF] Executed DbCommand ("8"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T14:57:36.7542610+05:30  [INF] Email sent to "CaptchaTest@example.com" (type="contact_user") (07c3b7b7)
2025-12-05T14:57:36.7667295+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Id], [AdditionalData], [AttemptCount], [CreatedAt], [DeletedAt], [ErrorMessage], [Message], [SentAt], [Status], [Subject], [ToAddress], [Type], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);" (0723d8ff)
2025-12-05T14:57:41.9604585+05:30  [ERR] Failed to send email to "admin@embryon.test" (d6429622)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
2025-12-05T14:57:42.0210792+05:30  [WRN] Failed to send email to "admin@embryon.test" attempt 1. Backoff 5s (82f39255)
MailKit.Net.Smtp.SmtpCommandException: 5.7.0 Too many emails per second. Please upgrade your plan https://mailtrap.io/billing/plans/testing
   at MailKit.Net.Smtp.SmtpClient.ParseDataResponse(SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at CleanArchitecture.Infrastructure.Services.MailKitEmailSender.SendAsync(String fromName, String fromEmail, String toEmail, String subject, String htmlMessage, String plainTextMessage) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.Infrastructure\Services\MailKitEmailSender.cs:line 63
   at CleanArchitecture.WebApi.BackgroundServices.EmailSenderBackgroundService.ProcessEmailAsync(QueuedEmail queued, CancellationToken cancellationToken) in D:\3Dec2025\CleanArchitectureSampleCode\CleanArchitectureDemo-main\CleanArchitectureDemo-main\CleanArchitecture\CleanArchitecture.WebApi\BackgroundServices\EmailSenderBackgroundService.cs:line 91
2025-12-05T14:57:42.0239601+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T14:57:51.4070510+05:30  [INF] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [AdditionalData] = @p0, [AttemptCount] = @p1, [CreatedAt] = @p2, [DeletedAt] = @p3, [ErrorMessage] = @p4, [Message] = @p5, [SentAt] = @p6, [Status] = @p7, [Subject] = @p8, [ToAddress] = @p9, [Type] = @p10, [UpdatedAt] = @p11
OUTPUT 1
WHERE [Id] = @p12;" (0723d8ff)
2025-12-05T14:57:51.4087124+05:30  [INF] Email sent to "admin@embryon.test" (type="contact_admin") (07c3b7b7)
